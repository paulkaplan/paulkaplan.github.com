---
layout: default
title : Playing with THREE.js and d3.js
javascripts:
  -
    name : 'd3'
    location : '/js/d3.js'
  -
    name : 'three'
    location : '/js/three.js'
  - 
    name : 'example'
    location : '/js/example.js'
---
##Three.js and d3.js
[Three.js](LINK "three.js") is a library for rendering 3D objects using the browser/hardware accelerated WebGL standard. It also abstracts over webGL by including an HTML5 CanvasRenderer as well. You can find examples of many other webGL projects of mine around (including [Face Based Controllers](LINK), [iPhone Controls for HTML5 Games](LINK)). Let's see if we can put WebGL together with D3 by remaking the classic __Three little circles__ tutorial from d3. 

<div id="chart"></div>

Above is a very simple example of d3 I found [here](http://bl.ocks.org/1062544). After creating the SVG canvas and attaching a 'mousemove' event to it, we just define how to create each of the new particles when the mouse is moved.

{% highlight js%}
var z = d3.scale.category20c(); // See link below
vis.on("mousemove", particle);

function particle() {
  var m = d3.svg.mouse(this); // Convenience method for mouse position
                              // returns [x,y]
  vis.append("svg:circle")
      .attr("cx", m[0])
      .attr("cy", m[1])
      .attr("r", 1e-6)
      .attr('fill-opacity', 1.0)
      .attr('fill', z(++i))
    .transition()
      .duration(2000)
      .ease(Math.sqrt)
      .attr("r", 100)
      .attr('fill-opacity', 1e-5)
      .remove();
}

{% endhighlight %}

`z` is just an array of 20 coordinated colors, you can find more information [here](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category20)

Let's try that with three.js. First is the requisite simple rotating cube, just to get our feet wet. Skipping some of the code because it is all in the examples from the github page.
<div id="three-d3-demo-simple"></div>

{% highlight js%}
var camera, scene, renderer, mesh;
function init() {
	scene = new THREE.Scene();
	
	camera = new THREE.PerspectiveCamera( 70, 1, 1, 1000 );
  (...)
	geometry = new THREE.CubeGeometry( 200, 200, 200 );
	material = new THREE.MeshBasicMaterial( { wireframe: true, color: 0xffaaee});
  (...)
	renderer = new THREE.WebGLRenderer();
  (...)
}

function animate() {
	requestAnimationFrame( animate );
	mesh.rotation.x += 0.005;
	mesh.rotation.y += 0.01;
	renderer.render( scene, camera );
}

{% endhighlight %}