<!DOCTYPE html>
<html>
  <head>
    <title>Browser Face Tracking + Google Streetview</title>
    <meta charset="utf-8" />
    <meta name="description" content="Personal website for Paul Kaplan" />
    <meta name="keywords" content="Paul,Kaplan,UChicago,University of Chicago, personal, interfaces" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   
    <!--[if lte IE 9]><link rel="stylesheet" href="css/ie.css" type="text/css" media="screen" /><![endif]-->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600|Merriweather:400,300,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/1140.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/styles.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen"/>
  </head>
  <body>
    <div class="container">
      <div class="row header">
        <div class="twelvecol last">
          <h1><span class="big">Paul Kaplan</span></h1>
          <h3><span class="bffig">experimentalist programming</span></h3>
        </div>
      </div>
      <div class="row content"><br \>
        <h3>Browser Face Tracking + Google Streetview</h3><br \>
        
        

<div class="highlight"><pre><code class="js"><span class="nx">navigator</span><span class="p">.</span><span class="nx">webkitGetUserMedia</span><span class="p">({</span><span class="nx">video</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">video</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitURL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Looks like your browser doesn&#39;t support using the webcam. Try Chrome&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="p">);</span>


<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ctx.drawImage(video, 0, 0, video.width, video.height, 0, 0, canvas.width, canvas.height);</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">video</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
  
  <span class="kd">var</span> <span class="nx">comp</span> <span class="o">=</span> <span class="nx">ccv</span><span class="p">.</span><span class="nx">detect_objects</span><span class="p">({</span>
    <span class="s2">&quot;canvas&quot;</span><span class="o">:</span> <span class="nx">canvas</span><span class="p">,</span>
    <span class="s2">&quot;cascade&quot;</span><span class="o">:</span> <span class="nx">cascade</span><span class="p">,</span> <span class="c1">// Defined in CCV as part of face-detection</span>
    <span class="s2">&quot;interval&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;min_neighbors&quot;</span><span class="o">:</span> <span class="mi">1</span>
  <span class="p">});</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">comp</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">comp</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">confidence</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">execute</span><span class="p">(</span><span class="nx">comp</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>


<p><button id="startMap">Start</button></p>

<p><video id="input" autoplay="autoplay" controls="false" style="display: none;"></video>
<canvas id="output" height="110" width="150" style="background-color: #000; display: none;"></canvas></p>

<script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>




<div id="pano" style="width: 1100.0px; height: 800.0px; display:none;"></div>


      </div>
    </div>
    <script src="/js/head.js" type="text/javascript"></script>
    <script type="text/javascript">
      head.js(
        { jquery   :   '/js/jquery.js' },
        { paul     :   '/js/paul.js'   }
        
          ,{ ccv : '/js/posts/20120725/ccv.js' }
        
          ,{ map : '/js/posts/20120725/map.js' }
        
        , function(){
          
            $('#startMap').click( function() { eval(initTrigger()) });
          
        }
      );
    </script>
    <script src="/js/mediaqueries.js" type="text/javascript"></script>
  </body>
</html>