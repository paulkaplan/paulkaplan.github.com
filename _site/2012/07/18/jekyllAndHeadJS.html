<!DOCTYPE html>
<html>
  <head>
    <title>Jekyll Templating for HeadJS</title>
    <meta charset="utf-8" />
    <meta name="description" content="Personal website for Paul Kaplan" />
    <meta name="keywords" content="Paul,Kaplan,UChicago,University of Chicago, personal, interfaces" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   
    <!--[if lte IE 9]><link rel="stylesheet" href="css/ie.css" type="text/css" media="screen" /><![endif]-->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600|Merriweather:400,300,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/1140.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/styles.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen"/>
  </head>
  <body>
    <div class="container">
      <div class="row header">
        <div class="twelvecol last">
          <h1><span class="big">Paul Kaplan</span></h1>
            <h3><span class="bffig">experimentalist programming</span></h2>
          </div>
        </div>
      </div>
      <div class="row content">
        <p>A snippet I found useful for building sites using Jekyll and HeadJS. On many pages I want some custom javascript to be loaded, but most of the javascript on my sites is loaded asynchronously by HeadJS. Of course I would prefer to have all that in my default template instead of writing it out differently for ever page. So in the YAML at the top of each Jekyll post I put</p>

<div class="highlight"><pre><code class="yaml">    <span class="l-Scalar-Plain">---</span>
    <span class="l-Scalar-Plain">title</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">new post</span>
    <span class="l-Scalar-Plain">...</span> 
    <span class="l-Scalar-Plain">javascripts</span> <span class="p-Indicator">:</span> 
      <span class="p-Indicator">-</span>
        <span class="l-Scalar-Plain">name</span> <span class="p-Indicator">:</span> <span class="s">&#39;name</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">javascript&#39;</span>
        <span class="l-Scalar-Plain">location</span> <span class="p-Indicator">:</span> <span class="s">&#39;/path/to/js/file&#39;</span>
      <span class="p-Indicator">-</span> 
        <span class="l-Scalar-Plain">name</span> <span class="p-Indicator">:</span> <span class="s">&#39;another</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">javascript&#39;</span>
        <span class="l-Scalar-Plain">location</span> <span class="p-Indicator">:</span> <span class="s">&#39;/path/to/other/js&#39;</span>
      <span class="l-Scalar-Plain">...</span>
    <span class="l-Scalar-Plain">---</span>
    
</code></pre>
</div>


<p>And in my default template I have</p>

<div class="highlight"><pre><code class="js">      <span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span>
        <span class="p">{</span> <span class="nx">jquery</span>  <span class="o">:</span>   <span class="s1">&#39;/js/jquery.js&#39;</span> <span class="p">},</span> <span class="c1">// for example</span>
        <span class="c1">// Now just repeat that in template form</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">js</span> <span class="k">in</span> <span class="nx">page</span><span class="p">.</span><span class="nx">javascripts</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">,{</span> <span class="p">{{</span><span class="nx">js</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span> <span class="o">:</span> <span class="s1">&#39;{{ js.location }}&#39;</span> <span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
        
      <span class="p">);</span>
</code></pre>
</div>


<p>And all my custom js files are loaded with each page!</p>

      </div>
    </div>
    <script src="/js/head.js" type="text/javascript"></script>
    <script type="text/javascript">
      head.js(
        { jquery   :   '/js/jquery.js' },
        { paul     :   '/js/paul.js'   }
        // 
        // 
        //   
        //     ,{ d3 : '/js/d3.js' }
        //   
        //     ,{ three : '/js/three.js' }
        //   
        //     ,{ example : '/js/example.js' }
        //   
        // 
        //   
        // 
        //   
        // 
      );
    </script>
    <script src="/js/mediaqueries.js" type="text/javascript"></script>
  </body>
</html>